
<style type="text/css">
	.accordion-toggle:after {
	    content: "" !important;
	}
	uib-accordion * {
		outline: 0 !important;
	}

	/*move the padding from the panel-heading to the accordion toggle*/
	/*so clicking anywhere in the heading makes the panel expand and shrink*/
	uib-accordion  .panel-heading {
		cursor: pointer;
	    padding: 0;
	}
	uib-accordion .accordion-toggle {
		padding-left: 15px;
	    padding-right: 15px;
	    padding-top: 10px;
	    padding-bottom: 10px;
	}
	.rightIcon{
		float:right;
		padding-right: 7px;
	}
	.savedText{
		float: right;
	    margin-top: -16px;
	    color: #888;
	
	}

	.animate {
		-webkit-transition:all linear 0.5s;
		transition:all linear 0.5s;
	}

	.animate.ng-hide {
		opacity:0;
	}

	.alert {
		position: absolute;
	    left: 50%;
	    transform: translate(-50%,0);
	    padding-right: 35px;
	}

</style>


<div class="container">
	<br>
	<div style="padding-top:41px"></div>
	<div ng-show ="settings.showAlertMsg" class="alert alert-info animate" role="alert">{{settings.alertMsgText}}</div>
	<div class="page-header">
		<h2 style="font-size:37px">
			{{user.dbData.name}}
		</h2>
		<div>{{user.dbData.email}}</div>
	</div>




	<div class="page-header">
		<h2>
			Classes Watching
		</h2>

	<span  ng-show="settings.getLoadingHidden()" class ="savedText animate">
		<span ng-if="settings.showLoadingText()">Loading...</span>
		<span ng-if="!settings.showLoadingText()">All changes saved</span>
	</span>
	</div>



	<uib-accordion close-others="false">
		<uib-accordion-group is-open="isOpen" ng-repeat="class in classes">
			<uib-accordion-heading>

				<span class="glyphicon" ng-class ="isOpen?'glyphicon-chevron-down':'glyphicon-chevron-right'" aria-hidden="true" style="color: gray;"></span>

				{{class.subject}} {{class.classId}}&nbsp;&nbsp;{{class.name}}&nbsp;&nbsp;({{class.termText}})
				
				<span list-icon = 'saved'    toggle="class" class="rightIcon" ></span>
				<span list-icon = 'watching' toggle="class" class="rightIcon" ></span>


			</uib-accordion-heading>

			{{class.desc}}
			<table class="table table-striped" ng-if="class.sections.length>0">
				<thead>
					<tr>
						<th><span uib-tooltip="Course Reference Number" tooltip-class="listIconTooltip" tooltip-append-to-body = "true">CRN</span></th>
						<th>Professor</th>
						<th>Start Time</th>
						<th>Open Seats/Total Seats</th>
						<th ng-if="section.hasWaitList">Open Spots/Total Waitlist Spots</th>
						<th>Location</th>
						<th>URL</th>
						<th>Email<br>Notifications</th>
						<th>Saved</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="section in class.sections">
						<td>{{section.crn}}</td>
						<td>
							<span ng-repeat = "prof in section.profs">{{prof}}</span>
						</td>
						<td>{{section.startTimesStrings}}</td>
						<td>{{section.seatsRemaining}}/{{section.seatsCapacity}}</td>
						<td ng-if ="section.hasWaitList">{{section.waitRemaining}}/{{section.waitCapacity}}</td>
						
						<td>
							<span ng-repeat = "location in section.locations">

								<span ng-if="location != 'Tba' || section.locations.length <= 1"> {{location}} </span>

								


							</span>
						</td>

						<td><a href="{{section.url}}" target="_blank">View on {{section.host}}</a></td>

						<td>
						<span  list-icon = 'watching' toggle="section" ></span>
						</td>

						<td>
						<span  list-icon = 'saved' toggle="section" ></span>
						</td>
					</tr>
				</tbody>
			</table>
			<div ng-if="class.sections.length==0">
				<br>No sections found
			</div>
		</uib-accordion-group>
	</uib-accordion>
</div>
