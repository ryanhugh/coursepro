
<!--template panel, used for trees-->
<!-- remove the white-space below and above to wrap the panels -->
<!-- baseZIndex needs to be set in this scope before included (it is currently set in graphInner.html) -->


<div
class= "treePanelWrapper"
ng-init="graph.initScope(this)" 
ng-style="style"
>


<!-- main panel -->
<div 
class="panel panel-primary treePanel" 
ng-if ="tree.isClass && !tree.hidden"
ng-click="graph.openPanel(this);" 
ng-mouseover="graph.onMouseOver(this)"
ng-mouseout="graph.onMouseOut(this)"
graph-panel-reposition
graph-line-to-parent
> 

<div class="panel-heading">
	<h3 class="panel-title" style="text-align: center;">{{tree.subject}} {{tree.classId}}<br/> {{tree.name}}</h3>
	<span class="glyphicon glyphicon-remove" aria-hidden="true" style="position: absolute;right: 7px;top: 7px;" ng-style="{'display':isExpanded?'':'none'}" ng-click="graph.closePanel(this)"></span>
</div>

<!-- only the panel body changes on isExpanded -->
<div ng-if = "isExpanded" class="panel-body panelBodyId" style="line-height: 14px;" ng-style="{'width':panelWidth+'px'}">
	<div ng-if = "tree.dataStatus === graph.macros.DATASTATUS_DONE">
		<div style="white-space: normal;margin-bottom:10px;line-height:15px">{{tree.desc}}</div>



		<div style="text-align: center;margin-bottom: -20px;">
			<a class="linkToClassWatchModel" data-toggle="modal" data-target="#myModal">Get notified if this class changes<br> or if any seats open up!</a>
		</div>
		<div>
			<div style="text-align:left;display: inline-block; position: absolute;max-width: 50%;line-height: 15px;">
				<span ng-if="tree.maxCredits === tree.minCredits && tree.maxCredits">
					{{tree.maxCredits}}
				</span>
				<span ng-if="tree.maxCredits !== tree.minCredits && tree.maxCredits">
					{{tree.minCredits}} to {{tree.maxCredits}}
				</span> 
				credits
				<br>
				<span ng-if ="tree.lastUpdateString">
					Updated {{tree.lastUpdateString}}
				</span>
			</div>
			<div style="text-align: right; display: inline-block; float: right; white-space: normal; max-width: 50%; min-width: 53px;">
				<a target="_blank" href="{{tree.prettyUrl}}" >View on {{tree.host}}</a>
			</div>
		</div>



		<div style="text-align:center;display: inline-block;padding-top:10px;width: 100%;margin-bottom: -10px;">
			<div style="width: 260px;"  ng-repeat = "section in tree.sections" class="classSection">

				<div style=" text-align: center;margin-bottom: 22px;">
					<span ng-repeat = "meeting in section.meetings" ng-if ="!meeting.hidden">

						<!-- times, eg 10:30 - 11:35 am -->
						<span ng-repeat = "timeString in meeting.timeStrings">
							{{timeString.start}} - {{timeString.end}}
						</span>
						<br>

						<!-- days, eg Monday, Wednesday, Thursday -->
						<span ng-repeat = "day in meeting.days">
							{{day}}
							<span ng-if = "!$last">, </span>
						</span>
						<br>

						<!-- hr/week jawn, eg 3.3 hours/week -->
						{{meeting.hoursPerWeek}} hours/week

						<br>

						<!-- location, eg International Village 019, but with href -->

						<span ng-switch on="meeting.location.toLowerCase()">
							<span ng-switch-when="tba">location undecided</span>
							<span ng-switch-when="">location undecided</span>
							<span ng-switch-when="web online">Web Online</span>
							<span ng-switch-default>

								<a target="_blank" href="http://maps.google.com/?q={{graph.getCollegeName() + meeting.building}}">{{meeting.where}}</a>

							</span>
						</span>
						<br>
						<br>
					</span>
				</div>

				<div class="lowerSectionInfo">
					<div style="display: inline-block;max-width: 50%;">


						<span ng-repeat = "prof in section.profs">
							{{prof}}
							<span ng-if = "!$last">, </span>
						</span>


						<br> CRN: {{section.crn}}</div>
						<div style="text-align: right; display: inline-block; float: right; white-space: normal; max-width: 50%; min-width: 53px;" class="rightSectionText"> {{section.seatsRemaining}}/{{section.seatsCapacity}} seats<br>
							<a target="_blank" href="{{section.url}}">View on {{section.host}}</a>
						</div>
					</div>
				</div>
			</div>




		</div>

		<div ng-if = "tree.dataStatus === graph.macros.DATASTATUS_FAIL">

			0 sections this term
			<div style="white-space: normal;"><br>Couldn't find any class info on<br> {{tree.host}} :( </div>
		</div>
	</div>






	<div ng-if = "!isExpanded" class="panel-body panelBodyId" style="line-height: 14px;">
		<div ng-if = "tree.dataStatus===graph.macros.DATASTATUS_FAIL">0 sections this term</div>

		<ng-pluralize ng-if = "tree.dataStatus!==graph.macros.DATASTATUS_FAIL" count="tree.crns.length" when="{'1':'{} section this term','other':'{} sections this term'}"></ng-pluralize>
	</div>


</div>
<!-- circle node in graph -->
<div 
ng-if="!tree.isClass && !tree.hidden"
style="width: 35px; height: 35px; border-radius: 50%;z-index: 150;position: relative;margin: 0px auto; background-color: rgb(0, 0, 255);"></div>

<div ng-if="tree.hidden"></div>

</div>