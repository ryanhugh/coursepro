!!!!


BEFORE PUBLIC:
remove login info from emailmgr.js
remove res.header('access-control-allow-origin','*')
remove sending any internal error to client


TODO AFTER CLASS CALC
copy desc from other sections and why do some have same name in same term?
if there are no sections in an entire subject, remove the subject. and if no sections for entire term, remove term and log something
and if no sections for entire college!?! log big warning
"linear algebra" in swath is there 4 times, but only 1 has desc??



if selector is hidden, and then comes back, and same option is selected, callback() not called

some classes dont have crns?
should store crns? 



pass catalog url to class.db and also frontend? so can put valid url in when theres no sections

assert subject deps
split up the asserts from deepequal...
addDep() is called everywhere withough checking to see if the dep exists already?

needs to get more of desc than just More theoretical, abstract, and rigorous than

make list of where others need to include certian elements and warn if 1<x<50
dont include credit hours "https://myswat.swarthmore.edu/pls/bwckctlg.p_disp_listcrse?term_in=201504&subj_in=MATH&crse_in=056&schd_in=%25"

remove deps:{} from sections if empty

actully needs to get done:
- use the longer value for pre and co reqs if they are not the same between section and have same name
- store req classId and subject instead of url... (api lookup possible + easier to tell apart from strings)
- remove duplicates from single list in prereqs (probably not going to happen )



isupdatedByParent -> isStartingPoint (default no, )

parseForm tests assert count?

base parser find dep with fields() -- find an existing pagedata.deps by a given fields, and if not exist, make one



//pretty sure this is done
id also say change it back to just deps: and add a loadDependencyChain() and then just search through deps for matching title
- and add the class data to the other classes

and

deps need to be processed before parent is processed so that when the parent hits the page it knows which dep to update -> load all, then parse all
instead of adding more deps (which it does currently)
and load classes: somehow -- nope



different names:
if eclass has name, only parse those with name
pagedatamgr.createFromParser - give desc




//convert the uri json to this
uri.setSearch({ foo: "bar", goodbye : ["world", "mars"] });
// uri == "?hello=mars&foo=bar&goodbye=world&goodbye=mars"


put spider into all separate ellucian files??/




add optional terms for parsers, and if dont have 50%, complain


birmham limits results to 350, fix this, and dosent have a class page?????



pretty case on where
https://www2.augustatech.edu/pls/ban8/bwckschd.p_disp_detail_sched?term_in=201514&crn_in=10585




FRONTEND:
have an array of examples on script.js



POINTER:
array of user agents for baseParser.js
sometimes add other headers and pull from array of user agents


TODO:
add domain and course type (MATH, etc) and type description??? and term (actuall term, not the url thing - this can replace year) to baseparser, abstract or use the same code that is in collegenames.js

scraper.js

frontend





make sure times are parsed correcly here
https://www2.augustatech.edu/pls/ban8/bwckctlg.p_disp_listcrse?term_in=201612&subj_in=ALHS&crse_in=1127&schd_in=C



LATER BUGS:



PARSERS


https://banners.presby.edu/prod/hzskschd.P_ViewSchedule
uses an old version of the site - different parser needed (easy to write, add later)



BASEPARSER.JS
https://bappas2.gram.edu:9000/pls/gram/bwckctlg.p_disp_dyn_ctlg
nodejs cant access a https over non standard port???
effcts: needle, https, requests, xmlhttprequest
works in python and in the browser (chrome)
use eff.org to test
update: could access localhost on port 8443 which forwarded from eff.org 443 (so non port 443 works, maybe something wierd with this site+nodejs?) (double check this on remote server)





// ---- collegenames.js ----
regex used for main hostname will fail on google.com.uk (in pointer)

titleCase will replace all on \w with a space.... (Texas A&M University -> Texas A M University)
Saint Joseph S University

fallback to hittitle if dns fails



DONE



multiple profs
https://bannerweb.upstate.edu/isis/bwckctlg.p_disp_listcrse?term_in=201610&subj_in=FAMP&crse_in=1650&schd_in=9


parse EECE abbr from search page

pre and co reqs and restrictions -- test!! --seems to be working test more
https://oscar.gatech.edu/pls/bprod/bwckschd.p_disp_detail_sched?term_in=201508&crn_in=90660
https://bannerweb.upstate.edu/isis/bwckschd.p_disp_detail_sched?term_in=201580&crn_in=83848

{type:and,values:[{values:[1,2],type:or}]}


log responce code when it fails -- done, test


move prerequs to the class and make catalog on depend on all % and have prerequs be classes --done, test





https://telaris.wlu.ca/ssb_prod/bwckctlg.p_disp_listcrse?term_in=201601&subj_in=MU&crse_in=296&schd_in=%25
baseparser.parsetable the body row is 1 less than the main row


 --- THIS IS NOT A SECTION, not a bug
https://telaris.wlu.ca/ssb_prod/bwckctlg.p_disp_listcrse?term_in=201505&subj_in=BE&crse_in=100W&schd_in=%25
class table is outside of details box, but it hit category view and its a differnt ver num at the bottom???
- should i parse this??, yes, there are ppl signed up here https://telaris.wlu.ca/ssb_prod/bwckschd.p_disp_detail_sched?term_in=201601&crn_in=2900


store class name in class, not section


almost working, need to parse things that arnt linked
https://www2.augustatech.edu/pls/ban8/bwckschd.p_disp_detail_sched?term_in=201516&crn_in=10483

